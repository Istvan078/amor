<div class="main-ion-content m-0 p-0">
 <!-- <ion-header collapse="condense">
  <ion-toolbar>
   <ion-title size="large">message</ion-title>
  </ion-toolbar>
 </ion-header> -->
 <ion-grid class="m-0 p-0">
    @if(!options?.phoneView || options?.isSelectedMatch) {
  <ion-row class="m-0 p-0 ion-justify-content-center">
   <ion-col class="m-0 p-0 d-flex ion-justify-content-center flex-cols ion-align-items-center" size="12">
    <div class="back-button">
     <ion-button (click)="backToMsgs()" fill="clear">
      <ion-icon name="arrow-back-outline" color="light"></ion-icon>
     </ion-button>
     <p>{{ matchProfile?.firstName }} a párod 2024.04.08 óta</p>
    </div>

    <div class="match-info">
     <h3>Te és {{ matchProfile?.firstName }} párba álltatok</h3>
     <p>4 hónappal ezelőtt</p>
     
     <div class="match-img-cont-wrapper">
      <div class="match-img-cont">
       <img
        src="https://img.freepik.com/free-vector/user-circles-set_78370-4704.jpg?t=st=1741696833~exp=1741700433~hmac=5c4d9770452bab7cb12b3a38cead02ffcd3f50b45d75a0da6324820dc1bd3df2&w=740"
        alt="Match Profile Picture"
       />
      </div>
     </div>

     <h4>
      Tudj róla, hogy {{ matchProfile?.firstName }} mikor olvassa el az üzeneted
     </h4>
     <ion-button fill="outline">Kérj visszaigazolást az olvasásról</ion-button>
    </div>

    <ion-list>
     @for(mess of messages.messages; track $index) {
     <ion-item>
      <ion-label>{{ mess.message }}</ion-label>
     </ion-item>
     }
    </ion-list>

    <div class="form-container">
     <form
      (ngSubmit)="onMessageSend(form)"
      #form="ngForm"
      class="message-form"
     >
      <ion-textarea 
       ngModel 
       name="message" 
       id="message"
       placeholder="Írd ide az üzeneted..."
       rows="1"
       autoGrow="true"
      ></ion-textarea>
      <ion-button type="submit" fill="clear">
       <ion-icon name="send-outline"></ion-icon>
      </ion-button>
     </form>
    </div>
   </ion-col>
  </ion-row>
  }   

  @if(options?.phoneView && !options?.isSelectedMatch) {
    @for(match of matches; track $index) {
    <ion-row>
     <ion-col size="12">
      <ion-card (click)="selectMatch(match)">
       <ion-card-content>
        <ion-item>
         <ion-thumbnail slot="start">
          <img [src]="match.pictures?.[0]?.url || 'https://ionicframework.com/docs/img/demos/thumbnail.svg'" alt="Profilkép" />
         </ion-thumbnail>
         <ion-label>
          <h2>{{match.firstName}}</h2>
          @if(messages.messages.length) {
          <p>{{messages.messages[messages.messages.length-1].message}}</p>
          }
         </ion-label>
        </ion-item>
       </ion-card-content>
      </ion-card>
     </ion-col>
    </ion-row>
    }
  }
 </ion-grid>
</div>
